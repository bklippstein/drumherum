<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: SmartInit
  
    &mdash; Documentation by YARD 0.8.5.2
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/klippstein.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/klippstein.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">SmartInit</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
      <div id="project-header">
  
</div>      
    </div>
    
    <div id="body">    
      <iframe id="search_frame"></iframe>
      <div id="content"><h1>Module: SmartInit
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <div class="row">      
    <dt class="r1 last">Defined in</dt>
    <dd class="r1 last">lib/drumherum/smart_init.rb</dd>
    </div>     
   
</dl>
<div class="clear"></div>

<div class="docstring">
  <div class="discussion">
    
<p><span class='object_link'><a href="#smart_init-instance_method" title="SmartInit#smart_init (method)">smart_init</a></span> finds the directory named 'lib' in your
project and adds</p>
<ul><li>
<p>the (main) directory above</p>
</li><li>
<p>the lib-directory itself</p>
</li></ul>

<p>to Rubys $LOAD_PATH. So your require statements load the actual version
from your (local) project directory, not the (public) gem version.</p>

<p>Also, <span class='object_link'><a href="#smart_init-instance_method" title="SmartInit#smart_init (method)">smart_init</a></span> sets some <span class='object_link'><a href="Drumherum.html" title="Drumherum (module)">release infos</a></span>
for Hoe.</p>

<p>Usage (wherever you are in the directory hierarchy of your project):</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>if</span> <span class='gvar'>$0</span> <span class='op'>==</span> <span class='kw'>__FILE__</span> 
  <span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>drumherum</span><span class='tstring_end'>'</span></span>
  <span class='id identifier rubyid_smart_init'>smart_init</span> 
<span class='kw'>end</span>
<span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>my-gem-project</span><span class='tstring_end'>'</span></span>   <span class='comment'># actual local version, not the gem version</span></code></pre>


  </div>
</div>
<div class="tags">
  

</div>



  
    <h2>
      Included in Object
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#smart_init-instance_method" title="#smart_init (instance method)">- (Object) <strong>smart_init</strong>(__file__ = nil) </a>
    

    
  </span>
  
    <span class="summary_desc"><div class='inline'></div></span>
    
  
  
  
  
  
  
  
</li>

      
    </ul>
  






  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="smart_init-instance_method">
  
    - (<tt><span class='object_link'>Object</span></tt>) <strong>smart_init</strong>(__file__ = nil) 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/drumherum/smart_init.rb', line 158</span>

<span class='kw'>def</span> <span class='id identifier rubyid_smart_init'>smart_init</span><span class='lparen'>(</span><span class='id identifier rubyid___file__'>__file__</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid___file__'>__file__</span> <span class='op'>=</span> <span class='id identifier rubyid_caller'>caller</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>unless</span> <span class='id identifier rubyid___file__'>__file__</span>
  <span class='id identifier rubyid_dir_caller'>dir_caller</span> <span class='op'>=</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_dirname'>dirname</span><span class='lparen'>(</span><span class='id identifier rubyid___file__'>__file__</span><span class='rparen'>)</span><span class='rparen'>)</span>
  
  <span class='comment'>#puts &quot;smart_init &quot; + dir_caller    
</span>  
  <span class='id identifier rubyid_patharray'>patharray</span> <span class='op'>=</span> <span class='id identifier rubyid_dir_caller'>dir_caller</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_patharray'>patharray</span> <span class='op'>=</span> <span class='id identifier rubyid_dir_caller'>dir_caller</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>       <span class='kw'>if</span> <span class='id identifier rubyid_patharray'>patharray</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>  
  <span class='id identifier rubyid_projectname'>projectname</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ERROR</span><span class='tstring_end'>'</span></span>

  <span class='lparen'>(</span><span class='id identifier rubyid_patharray'>patharray</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>-</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
  
    <span class='comment'># found name/lib/name?
</span>    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_patharray'>patharray</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lib</span><span class='tstring_end'>'</span></span>  <span class='op'>&amp;&amp;</span>  <span class='id identifier rubyid_patharray'>patharray</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_patharray'>patharray</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_projectname'>projectname</span> <span class='op'>=</span> <span class='id identifier rubyid_patharray'>patharray</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_patharray'>patharray</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
      <span class='kw'>break</span>
      
    <span class='comment'># found lib one level down?
</span>    <span class='kw'>elsif</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span><span class='lparen'>(</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_patharray'>patharray</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lib</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='rparen'>)</span> 
      <span class='id identifier rubyid_projectname'>projectname</span> <span class='op'>=</span> <span class='id identifier rubyid_patharray'>patharray</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='kw'>break</span>
      
    <span class='kw'>else</span>
      <span class='id identifier rubyid_patharray'>patharray</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
      
    <span class='kw'>end</span>
  
  <span class='kw'>end</span> <span class='comment'># do
</span>  

  <span class='comment'># see &quot;projectname = #{projectname}&quot;
</span>  <span class='comment'># see patharray    
</span>  <span class='comment'># see
</span>  <span class='const'>Drumherum</span><span class='op'>::</span><span class='id identifier rubyid_directory_main'>directory_main</span> <span class='op'>=</span> <span class='id identifier rubyid_patharray'>patharray</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  
  <span class='comment'># /projectname/lib/projectname not included, because you won't be able to require 'set'
</span>  <span class='comment'># anymore if you have a file with the same name in your lib
</span>  <span class='comment'># newpath = File.join(patharray,'lib', projectname)  
</span>  <span class='comment'># unless $:.include?(newpath)
</span>    <span class='comment'># $:.unshift(newpath)  
</span>  <span class='comment'># end      
</span>     
  <span class='comment'># /projectname/lib 
</span>  <span class='id identifier rubyid_newpath'>newpath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_patharray'>patharray</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lib</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='gvar'>$:</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_newpath'>newpath</span><span class='rparen'>)</span>
    <span class='gvar'>$:</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_newpath'>newpath</span><span class='rparen'>)</span>  
  <span class='kw'>end</span>       
     
  <span class='comment'># /projectname
</span>  <span class='id identifier rubyid_newpath'>newpath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_patharray'>patharray</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='gvar'>$:</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_newpath'>newpath</span><span class='rparen'>)</span>
    <span class='gvar'>$:</span><span class='period'>.</span><span class='id identifier rubyid_unshift'>unshift</span><span class='lparen'>(</span><span class='id identifier rubyid_newpath'>newpath</span><span class='rparen'>)</span>  
  <span class='kw'>end</span>    
  
  <span class='comment'># see $LOAD_PATH
</span>  
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    </div>   

    <div id="footer">      
      <div id="project-footer">
</div>      
      Generated on Mon Mar 25 11:22:36 2013 by
<a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a> 0.8.5.2
with <a href="http://bklippstein.github.com/yard_klippstein_template/index.html" 
        title="Klippstein Template for Ruby YARD" 
        target="_parent">
        yard_klippstein_template
        </a>  



    </div>     
    
  </body>
</html>